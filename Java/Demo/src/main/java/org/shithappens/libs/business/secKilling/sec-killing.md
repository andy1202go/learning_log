https://mp.weixin.qq.com/s/ksJcA-8v2kY5J0dkMF6W5Q 

![tup](https://mmbiz.qpic.cn/mmbiz_png/AVWicyZuuClH38oJYSMwnsM8LtcCsMfyEHIWJ15LgIbuduKK6oBZRIpuOpb9EeRLgNb0AfAeIiauJG2via5eCkOwA/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1)

设计一个秒杀系统，整体而言可以从前端与后端进行优化。

对于前端优化而言，可以从「页面静态化 + CDN」、请求频率限制进行优化。

其中「页面静态化 + CDN」指的是将不变的静态数据固定下来，然后放入 CDN 服务器，从而降低用户请求的响应速度，降低服务器的并发压力。请求频率限制，则是通过抢购概率与抢购频率限制，降低后端服务器的服务压力。

对于后端优化而言，一般有「增加缓存层 + 预热数据」、「MQ 异步处理」、「限流、熔断、降级」、业务侧优化这 4 种优化方式。

其中「增加缓存层 + 预热数据」指的是将热点数据存入缓存，并在活动开始前提前加载到缓存中，降低数据库层的读取压力。「MQ 异步处理」指的是对于非必要的业务逻辑，通过 MQ 进行异步处理，降低请求处理延时，同时提高业务系统整体稳定性。

「限流、熔断、降级」是对于整体微服务的保护，其中限流指的是对请求进行限制，当超过限流阈值时，直接拒绝请求，保护系统本身；熔断指的是保护下游系统，当请求下游系统连续错误超过阈值时，自动不去请求下游系统，避免因重试流量过大击垮下游系统。

降级指的是当请求失败时，自动返回默认数据，提高用户体验。业务侧优化，则是指从业务层面去进行逻辑优化，从而降低技术复杂度，使得业务与技术复杂度达到一个平衡的状态，有利于更好地实现秒杀系统的高可用与高并发。

上面说到的 6 个优化思路，是设计秒杀系统常见的优化思路。但在实际业务场景中，除了要保障正常的功能设计之外，还还考虑防刷、安全、黑产等问题，此时可能需要多考虑一些其他优化，例如：黄牛利用抢购工具抢购，导致正常用户无法抢到商品等。

这时候可能需要考虑增加验证码，用 App 设备指纹等风控措施。此外，对于秒杀系统而言，做好业务指标和系统指标的埋点监控也是非常重要的。